"use strict";(self["webpackChunkpwa_wibsite"]=self["webpackChunkpwa_wibsite"]||[]).push([[4458],{4458:(e,t,o)=>{o.r(t),o.d(t,{default:()=>B});var a=o(3673),n=o(2323);const r=(0,a.Uk)(" Order Track "),l=(0,a._)("div",{id:"loader2",class:"pre-loader",style:{display:"none"}},null,-1),i=(0,a._)("div",{class:"full-width",style:{"min-height":"550px"},id:"map-canvas"},null,-1),s={key:0,class:"row absolute-bottom q-py-md justify-center bg-white"},d={class:"text-bold text-center"},c=(0,a._)("br",null,null,-1),p={class:"cb-text-blue-8 text-weight-bolder cb-font-16"},g={class:"col-8 text-center cb-text-blue-8"},_={class:"q-px-sm"},u={class:"col-4"},m={class:"row justify-center q-pt-md"};function b(e,t,o,b,y,v){const w=(0,a.up)("q-space"),f=(0,a.up)("q-toolbar"),h=(0,a.up)("q-header"),k=(0,a.up)("q-page"),x=(0,a.up)("q-btn"),q=(0,a.up)("q-icon"),D=(0,a.up)("q-card-section"),I=(0,a.up)("q-radio"),H=(0,a.up)("q-card"),W=(0,a.up)("q-dialog"),M=(0,a.up)("q-page-container"),Z=(0,a.up)("q-layout"),$=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(Z,{view:"lHh lpr lFf",class:"animate__animated animate__slideInRight"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{class:"text-orange-8 bg-white text-bold"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(w),r,(0,a.Wm)(w),(0,a.Wm)(w)])),_:1})])),_:1}),(0,a.Wm)(M,null,{default:(0,a.w5)((()=>[l,(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[i])),_:1}),1==b.cancle_order_button?((0,a.wg)(),(0,a.iD)("div",s,[(0,a.Wm)(x,{label:"cancel order",color:"orange-9",onClick:t[0]||(t[0]=e=>b.trackdailog=!0)})])):(0,a.kq)("",!0),(0,a.Wm)(W,{modelValue:b.trackdailog,"onUpdate:modelValue":t[3]||(t[3]=e=>b.trackdailog=e),position:"bottom"},{default:(0,a.w5)((()=>[(0,a.Wm)(H,null,{default:(0,a.w5)((()=>[(0,a.Wm)(D,{class:"cb-bg-grey-2 text-bold q-pa-none"},{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",d,[(0,a.Wm)(q,{name:"arrow_drop_down",size:"sm",class:"cb-text-grey-4"}),c,(0,a._)("span",p,(0,n.zw)(b.rating_text1),1)])),[[$]])])),_:1}),(0,a.Wm)(D,{class:"q-pa-sm"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(b.cancellation_reason_predefined_texts,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e,class:"row items-center"},[(0,a._)("div",g,[(0,a._)("span",_,(0,n.zw)(e),1)]),(0,a._)("div",u,[(0,a.Wm)(I,{modelValue:b.reason,"onUpdate:modelValue":t[1]||(t[1]=e=>b.reason=e),val:e,color:"orange"},null,8,["modelValue","val"])])])))),128)),(0,a._)("div",m,[(0,a.Wm)(x,{label:"cancel order",color:"orange-8",dense:"",class:"q-px-lg",onClick:t[2]||(t[2]=e=>v.cancel_order_fun())})])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}o(1768);var y=o(1959);const v={setup(){return{access_token:(0,y.iH)(null),xid:(0,y.iH)(null),trackdailog:(0,y.iH)(!1),cancellation_reason_predefined_texts:[],reason:(0,y.iH)(null),rating_text1:(0,y.iH)(null),cancle_order_button:(0,y.iH)(null),distance:(0,y.iH)(null),est:(0,y.iH)(null),rating_text2:(0,y.iH)(null),order:(0,y.iH)(null)}},mounted(){var e=this;e.getAccessToken(),this.GetDeliveryBoydata(),setInterval((function(){e.GetDeliveryBoydata()}),6e4)},methods:{load_data(){var e=this;if(e.cancle_order_button=1,e.cancellation_reason_predefined_texts=["Delivery Boy Not Assigned Yet"," Order Delivery Too Late"," I Forgot Some Items"," I Changed My Mind"," Others"],e.distance="",e.est="",e.rating_text1="Rate Your Delivery",e.rating_text2="Rate Driver",e.order={id:290220,uid:"HYU1258675",status:"701",delivery_person_id:null,from_lat_lng:"17.4056861,78.3261244",to_lat_lng:"17.448294,78.391487",from_location:"new,Vattinagulapalle, Hyderabad, India, 500075",to_location:"new,Vattinagulapalle, Hyderabad, India, 500075",service_id:11,order_status_string:"New",delivery_boy_name:"sandeep",delivery_boy_img:"",delivery_boy_rating:"",delivery_boy_mobile:"",delivery_boy_bikeno:"12357890",rider_lat_lng:"17.4056861,78.3261244",no_of_deliveries:"",refresh_time:""},e.order.rider_lat_lng)var t=e.order.rider_lat_lng,o="https://chotabeta.app/img/rider_dir.png",a="<strong>Pick Location</strong><br/>"+e.order.rider_lat_lng+"<br/>"+e.order.delivery_boy_name+","+e.order.delivery_boy_bikeno;else t=e.order.from_lat_lng,o="https://chotabeta.app/img/pickpoint.png",a="<strong>Pick Location</strong><br/>"+e.order.from_location+"<br/>Rider Not Assigned";var n=e.order.to_lat_lng,r="https://chotabeta.app/img/droppoint1.png",l="<strong>Drop Location</strong><br/>"+e.order.to_location+"<br/>Rider Not Assigned";e.initMap(t,n,o,r,a,l)},getAccessToken(){var e=this;e.$store.state.token?e.access_token=e.$store.state.token:e.access_token=e.$store.state.token_cb,e.$store.state.xid?e.xid=e.$store.state.xid:e.xid=e.$store.state.xid_cb,null!=e.access_token&&e.access_token||e.$router.push("/")},GetDeliveryBoydata(){var e=this,t=document.getElementById("loader2");t.style.display="block";let o={headers:{Authorization:`Bearer ${e.access_token}`}};e.$api.post("/api/vendor/get-userapp-rider-latlong?order_id="+e.$route.query.uid,o).then((function(o){console.log("response"),t.style.display="none",e.cancle_order_button=o.data.cancle_order_button,e.cancellation_reason_predefined_texts=o.data.cancellation_reason_predefined_texts,e.distance=o.data.distance,e.est=o.data.est,e.rating_text1=o.data.rating_text1,e.rating_text2=o.data.rating_text2,e.order=o.data.order;var a=e.order.from_lat_lng,n=e.order.to_lat_lng,r="https://chotabeta.app/img/pickpoint.png",l="https://chotabeta.app/img/droppoint1.png",i="<strong>Pick Location</strong><br/>"+e.order.from_location+"<br/>Rider Not Assigned",s="<strong>Drop Location</strong><br/>"+e.order.to_location+"<br/>Rider Not Assigned";e.initMap(a,n,r,l,i,s)})).catch((function(e){console.log(e)}))},initMap(e,t,o,a,n,r){var l,i,s=e,d=t,c=new google.maps.DirectionsService,p=null,g={start:new google.maps.MarkerImage(o,new google.maps.Size(50,50),new google.maps.Point(0,0),new google.maps.Point(22,32)),end:new google.maps.MarkerImage(a,new google.maps.Size(50,50),new google.maps.Point(0,0),new google.maps.Point(22,32))};l=new google.maps.DirectionsRenderer({suppressMarkers:!0});var _={zoom:17,mapTypeId:google.maps.MapTypeId.ROADMAP,center:new google.maps.LatLng(e)};p=new google.maps.Map(document.getElementById("map-canvas"),_),l.setMap(p);var u={origin:s,destination:d,travelMode:google.maps.TravelMode.DRIVING};function m(e,t,o){i=new google.maps.Marker({position:e,map:p,icon:t,title:o});var a=new google.maps.InfoWindow;google.maps.event.addListener(i,"click",function(e){return function(){a.setContent(o),a.open(p,e)}}(i))}c.route(u,(function(e,t){if(t==google.maps.DirectionsStatus.OK){l.setDirections(e);var o=e.routes[0].legs[0];m(o.start_location,g.start,n),m(o.end_location,g.end,r)}}))},cancel_order_fun(){var e=this;if(!e.reason)return e.$q.notify({message:"Please Select Reason",type:"negative",progress:!0}),!1;var t=document.getElementById("loader2");t.style.display="block";let o=new FormData;o.append("reason",e.reason),o.append("order_id",e.$route.query.uid);let a={headers:{Authorization:`Bearer ${e.access_token}`}};e.$api.post("/api/request-order-cancellation",o,a).then((function(e){t.style.display="none"})).catch((function(e){console.log(e)}))}}};var w=o(4260),f=o(3066),h=o(3812),k=o(9570),x=o(8240),q=o(2025),D=o(2652),I=o(4379),H=o(6778),W=o(151),M=o(5589),Z=o(4554),$=o(7991),Q=o(677),P=o(7518),R=o.n(P);const A=(0,w.Z)(v,[["render",b]]),B=A;R()(v,"components",{QLayout:f.Z,QHeader:h.Z,QToolbar:k.Z,QBtn:x.Z,QSpace:q.Z,QPageContainer:D.Z,QPage:I.Z,QDialog:H.Z,QCard:W.Z,QCardSection:M.Z,QIcon:Z.Z,QRadio:$.Z}),R()(v,"directives",{ClosePopup:Q.Z})}}]);